<!--
    In Progress

    https://www.w3schools.com/howto/howto_js_form_steps.asp
    https://bl.ocks.org/mbostock/3886208
-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="https://vignette.wikia.nocookie.net/survivor/images/2/26/Survivor_36_Logo.png/revision/latest?cb=20171221043639">
        <title>Survivor - Ghost Island</title>
	   
        <!-- jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        
        <!-- D3 -->
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="d3-tip.js"></script>
        
    </head>
    <style>
        body {
            background-color: #efedf5;
            font-family: "Trebuchet";
        }
        #title {
            text-align: center;
        }
        #survivor_form {
            margin: 0 auto;
            width: 60%;
            height: 75%;
            background-color: #fff;
        }
        .isHidden {
            display: none;            
        }
        .tab {
            display: none;
        }
        #prevBtn, #nextBtn {
            background-color: rebeccapurple;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            font-size: 17px;
            font-family: Raleway;
            cursor: pointer;
        }
        #prevBtn:hover, #nextBtn:hover {
            opacity: 0.8;
        }
        #prevBtn {
            background-color: #bbbbbb;
        }
        #chart {
			display: table;
			margin: 0 auto;		
		}
		.axis path,
		.axis line {
			fill: none;
			stroke: #000;
			shape-rendering: crispEdges;
			stroke-width: 2px;
		}
		.d3-tip {
			line-height: 1;
			font-weight: bold;
			padding: 12px;
			background: rgba(0, 0, 0, 0.8);
			color: #fff;
			border-radius: 2px;
			text-align: left;
			position: absolute;
			z-index: 40;
			font: 12px verdana, sans-serif;
		}
    </style>
    <body>
        <div id="survivor_form">
            <div id="title">
                <h1>Fantasy Survivor - Ghost Island</h1>
                <img src="https://vignette.wikia.nocookie.net/survivor/images/2/26/Survivor_36_Logo.png/revision/latest?cb=20171221043639"/>
            </div>
            <div class="tab">
                <p>What is your name?</p>
                <form name="name">
                    <input name="name" type="radio" value="Anastassia">
                        Anastassia
                    <br>
                    <input name="name" type="radio" value="Colin">
                        Colin
                    <br>
                    <input name="name" type="radio" value="David">
                        David
                    <br>
                    <input name="name" type="radio" value="Ethan">
                        Ethan
                    <br>
                    <input name="name" type="radio" value="Emily">
                        Emily
                    <br>
                    <input name="name" type="radio" value="Ezra">
                        Ezra
                    <br>
                    <input name="name" type="radio" value="Josh">
                        Josh
                    <br>
                    <input name="name" type="radio" value="Lucas">
                        Lucas
                    <br>
                    <input name="name" type="radio" value="Walter">
                        Walter
                    <br>
                </form>
            </div>
            <div class="tab">
                <h3>Outwit</h3>
                <p>Who will win REWARD this week?</p>
                <form name="reward">
                    <input name="reward" type="radio" value="Angela Perkins">
                        Angela Perkins
                    <br>
                    <input name="reward" type="radio" value="Bradley Kleihege">
                        Bradley Kleihege
                    <br>
                    <input name="reward" type="radio" value="Brendan Shapiro">
                        Brendan Shapiro
                    <br>
                    <input name="reward" type="radio" value="Chelsea Townsend">
                        Chelsea Townsend
                    <br>
                    <input name="reward" type="radio" value="Chris Noble">
                        Chris Noble
                    <br>
                    <input name="reward" type="radio" value="Desiree Afuye">
                        Desiree Afuye
                    <br>
                    <input name="reward" type="radio" value="Domenick Abbate">
                        Domenick Abbate
                    <br>
                    <input name="reward" type="radio" value="Donathan Hurley">
                        Donathan Hurley
                    <br>
                    <input name="reward" type="radio" value="Jacob Derwin">
                        Jacob Derwin
                    <br>
                    <input name="reward" type="radio" value="James Lim">
                        James Lim
                    <br>
                    <input name="reward" type="radio" value="Jenna Bowman">
                        Jenna Bowman
                    <br>
                    <input name="reward" type="radio" value="Kellyn Bechtold">
                        Kellyn Bechtold
                    <br>
                    <input name="reward" type="radio" value="Laurel Johnson">
                        Laurel Johnson
                    <br>
                    <input name="reward" type="radio" value="Libby Vincek">
                        Libby Vincek
                    <br>
                    <input name="reward" type="radio" value="Michael Yerger">
                        Michael Yerger
                    <br>
                    <input name="reward" type="radio" value="Morgan Ricke">
                        Morgan Ricke
                    <br>
                    <input name="reward" type="radio" value="Sebastian Noel">
                        Sebastian Noel
                    <br>
                    <input name="reward" type="radio" value="Stephanie Gonzalez">
                        Stephanie Gonzalez
                    <br>
                    <input name="reward" type="radio" value="Stephanie Johnson">
                        Stephanie Johnson
                    <br>
                    <input name="reward" type="radio" value="Wendell Holland">
                        Wendell Holland
                    <br>
                </form>
            </div>
            <div class="tab">
                <h3>Outlast</h3>
                <p>Who will win IMMUNITY this week?</p>
                <form name="immunity">
                    <input name="immunity" type="radio" value="Angela Perkins">
                        Angela Perkins
                    <br>
                    <input name="immunity" type="radio" value="Bradley Kleihege">
                        Bradley Kleihege
                    <br>
                    <input name="immunity" type="radio" value="Brendan Shapiro">
                        Brendan Shapiro
                    <br>
                    <input name="immunity" type="radio" value="Chelsea Townsend">
                        Chelsea Townsend
                    <br>
                    <input name="immunity" type="radio" value="Chris Noble">
                        Chris Noble
                    <br>
                    <input name="immunity" type="radio" value="Desiree Afuye">
                        Desiree Afuye
                    <br>
                    <input name="immunity" type="radio" value="Domenick Abbate">
                        Domenick Abbate
                    <br>
                    <input name="immunity" type="radio" value="Donathan Hurley">
                        Donathan Hurley
                    <br>
                    <input name="immunity" type="radio" value="Jacob Derwin">
                        Jacob Derwin
                    <br>
                    <input name="immunity" type="radio" value="James Lim">
                        James Lim
                    <br>
                    <input name="immunity" type="radio" value="Jenna Bowman">
                        Jenna Bowman
                    <br>
                    <input name="immunity" type="radio" value="Kellyn Bechtold">
                        Kellyn Bechtold
                    <br>
                    <input name="immunity" type="radio" value="Laurel Johnson">
                        Laurel Johnson
                    <br>
                    <input name="immunity" type="radio" value="Libby Vincek">
                        Libby Vincek
                    <br>
                    <input name="immunity" type="radio" value="Michael Yerger">
                        Michael Yerger
                    <br>
                    <input name="immunity" type="radio" value="Morgan Ricke">
                        Morgan Ricke
                    <br>
                    <input name="immunity" type="radio" value="Sebastian Noel">
                        Sebastian Noel
                    <br>
                    <input name="immunity" type="radio" value="Stephanie Gonzalez">
                        Stephanie Gonzalez
                    <br>
                    <input name="immunity" type="radio" value="Stephanie Johnson">
                        Stephanie Johnson
                    <br>
                    <input name="immunity" type="radio" value="Wendell Holland">
                        Wendell Holland
                    <br>
                </form>
            </div>
            <div class="tab">
                <h3>Outplay</h3>
                <p>Who will be VOTED OFF this week?</p>
                <form name="eliminated">
                    <input name="eliminated" type="radio" value="Angela Perkins">
                        Angela Perkins
                    <br>
                    <input name="eliminated" type="radio" value="Bradley Kleihege">
                        Bradley Kleihege
                    <br>
                    <input name="eliminated" type="radio" value="Brendan Shapiro">
                        Brendan Shapiro
                    <br>
                    <input name="eliminated" type="radio" value="Chelsea Townsend">
                        Chelsea Townsend
                    <br>
                    <input name="eliminated" type="radio" value="Chris Noble">
                        Chris Noble
                    <br>
                    <input name="eliminated" type="radio" value="Desiree Afuye">
                        Desiree Afuye
                    <br>
                    <input name="eliminated" type="radio" value="Domenick Abbate">
                        Domenick Abbate
                    <br>
                    <input name="eliminated" type="radio" value="Donathan Hurley">
                        Donathan Hurley
                    <br>
                    <input name="eliminated" type="radio" value="Jacob Derwin">
                        Jacob Derwin
                    <br>
                    <input name="eliminated" type="radio" value="James Lim">
                        James Lim
                    <br>
                    <input name="eliminated" type="radio" value="Jenna Bowman">
                        Jenna Bowman
                    <br>
                    <input name="eliminated" type="radio" value="Kellyn Bechtold">
                        Kellyn Bechtold
                    <br>
                    <input name="eliminated" type="radio" value="Laurel Johnson">
                        Laurel Johnson
                    <br>
                    <input name="eliminated" type="radio" value="Libby Vincek">
                        Libby Vincek
                    <br>
                    <input name="eliminated" type="radio" value="Michael Yerger">
                        Michael Yerger
                    <br>
                    <input name="eliminated" type="radio" value="Morgan Ricke">
                        Morgan Ricke
                    <br>
                    <input name="eliminated" type="radio" value="Sebastian Noel">
                        Sebastian Noel
                    <br>
                    <input name="eliminated" type="radio" value="Stephanie Gonzalez">
                        Stephanie Gonzalez
                    <br>
                    <input name="eliminated" type="radio" value="Stephanie Johnson">
                        Stephanie Johnson
                    <br>
                    <input name="eliminated" type="radio" value="Wendell Holland">
                        Wendell Holland
                    <br>
                </form>
            </div>
            <div class="tab">
                <h3>Outplay</h3>
                <p>Who will be SAFE this week?</p>
                <form name="safe">
                    <input name="safe" type="radio" value="Angela Perkins">
                        Angela Perkins
                    <br>
                    <input name="safe" type="radio" value="Bradley Kleihege">
                        Bradley Kleihege
                    <br>
                    <input name="safe" type="radio" value="Brendan Shapiro">
                        Brendan Shapiro
                    <br>
                    <input name="safe" type="radio" value="Chelsea Townsend">
                        Chelsea Townsend
                    <br>
                    <input name="safe" type="radio" value="Chris Noble">
                        Chris Noble
                    <br>
                    <input name="safe" type="radio" value="Desiree Afuye">
                        Desiree Afuye
                    <br>
                    <input name="safe" type="radio" value="Domenick Abbate">
                        Domenick Abbate
                    <br>
                    <input name="safe" type="radio" value="Donathan Hurley">
                        Donathan Hurley
                    <br>
                    <input name="safe" type="radio" value="Jacob Derwin">
                        Jacob Derwin
                    <br>
                    <input name="safe" type="radio" value="James Lim">
                        James Lim
                    <br>
                    <input name="safe" type="radio" value="Jenna Bowman">
                        Jenna Bowman
                    <br>
                    <input name="safe" type="radio" value="Kellyn Bechtold">
                        Kellyn Bechtold
                    <br>
                    <input name="safe" type="radio" value="Laurel Johnson">
                        Laurel Johnson
                    <br>
                    <input name="safe" type="radio" value="Libby Vincek">
                        Libby Vincek
                    <br>
                    <input name="safe" type="radio" value="Michael Yerger">
                        Michael Yerger
                    <br>
                    <input name="safe" type="radio" value="Morgan Ricke">
                        Morgan Ricke
                    <br>
                    <input name="safe" type="radio" value="Sebastian Noel">
                        Sebastian Noel
                    <br>
                    <input name="safe" type="radio" value="Stephanie Gonzalez">
                        Stephanie Gonzalez
                    <br>
                    <input name="safe" type="radio" value="Stephanie Johnson">
                        Stephanie Johnson
                    <br>
                    <input name="safe" type="radio" value="Wendell Holland">
                        Wendell Holland
                    <br>
                </form>
            </div>
            <div class="tab">
                <h3>Bonus Questions</h3>
                <p>This weeks episode is title "...". Who said this?</p>
                <form name="titleQuote">
                    <select>
                        <option value="Angela Perkins">
                            Angela Perkins
                        </option>
                        <option value="Angela Perkins">
                            Angela Perkins
                        </option>
                        <option value="Bradley Kleihege">
                            Bradley Kleihege
                        </option>
                        <option value="Brendan Shapiro">
                            Brendan Shapiro
                        </option>
                        <option value="Chelsea Townsend">
                            Chelsea Townsend
                        </option>
                        <option value="Chris Noble">
                            Chris Noble
                        </option>
                        <option value="Desiree Afuye">
                            Desiree Afuye
                        </option>
                        <option value="Domenick Abbate">
                            Domenick Abbate
                        </option>
                        <option value="Donathan Hurley">
                            Donathan Hurley
                        </option>
                        <option value="Jacob Derwin">
                            Jacob Derwin
                        </option>
                        <option value="James Lim">
                            James Lim
                        </option>
                        <option value="Jenna Bowman">
                            Jenna Bowman
                        </option>
                        <option value="Kellyn Bechtold">
                            Kellyn Bechtold
                        </option>
                        <option value="Laurel Johnson">
                            Laurel Johnson
                        </option>
                        <option value="Libby Vincek">
                            Libby Vincek
                        </option>
                        <option value="Michael Yerger">
                            Michael Yerger
                        </option>
                        <option value="Morgan Ricke">
                            Morgan Ricke
                        </option>
                        <option value="Sebastian Noel">
                            Sebastian Noel
                        </option>
                        <option value="Stephanie Gonzalez">
                            Stephanie Gonzalez
                        </option>
                        <option value="Stephanie Johnson">
                            Stephanie Johnson
                        </option>
                        <option value="Wendell Holland">
                            Wendell Holland
                        </option>
                    </select>
                </form>
                <br>
                <p>Will there be nudity this week?</p>
                <form name="nudity">
                    <input name="nudity" type="radio" value="Yes">
                        Yes
                    <br>
                    <input name="nudity" type="radio" value="No">
                        No
                    <br>
                </form>
                <br>
                <p>Will an idol be found this week?</p>
                <form name="idolFound">
                    <input name="idolFound" type="radio" value="Yes">
                        Yes
                    <br>
                    <input name="idolFound" type="radio" value="No">
                        No
                    <br>
                </form>
                <br>
                <p>Will an idol be played this week?</p>
                <form name="idolPlayed">
                    <input name="idolPlayed" type="radio" value="Yes">
                        Yes
                    <br>
                    <input name="idolPlayed" type="radio" value="No">
                        No
                    <br>
                </form>
            </div>
            <div class="tab">
                <div id="chart"></div>
            </div>
            <br>
            <div style="overflow:auto;">
                <div style="float:middle;">
                    <button type="button" id="prevBtn">Previous</button>
                    <button type="button" id="nextBtn">Next</button>
                </div>
            </div>
            <div style="text-align:center;margin-top:40px;">
                <progress value="0" max="100" color="rebeccapurple"></progress>
            </div>
        </div>
        
    </body>
    
    <script>
    $(document).ready(function(){
        
        // Collect form results
        function get_results(form) {
            var val = ""
            for(var c=0; c<form.length-1; c++) {
                if (form[c].checked === true) {
                    val = form[c].value;     
                };
            };
            return val;
        };
        
        $("#reward_button").click(function(e){
            var results = get_results(this.form.reward);
            console.log(results);
        });
        
        
        // Tab switching
        var currentTab = 0;
        showTab(currentTab);
        
        $("#prevBtn").click(function(e) {
            nextPrev(-1);   
        });
        $("#nextBtn").click(function(e) {
            nextPrev(1);   
        });
        
        function showTab(n) {
            // This function will display the specified tab of the form...
            var x = $(".tab");
            x[n].style.display = "block";
            //... and fix the Previous/Next buttons:
            if (n == 0) {
                $("#prevBtn").addClass("isHidden");
            } else {
                $("#prevBtn").removeClass("isHidden");
            }
            if (n == (x.length - 1)) {
                $("#nextBtn").html("Submit");
            } else {
                $("#nextBtn").html("Next");
            }
            //... and run a function that will display the correct step indicator:
            fixStepIndicator(n)
        };
        
        function nextPrev(n) {
            // This function will figure out which tab to display
            var x = $(".tab");
            // Exit the function if any field in the current tab is invalid:
            if (n == 1 && !validateform()) {
                return false;
            };
            // Hide the current tab:
            x[currentTab].style.display = "none";
            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;
            // if you have reached the end of the form...
            if (currentTab >= x.length) {
                // ... the form gets submitted:
                document.getElementById("regForm").submit();
                return false;
            };
            // Otherwise, display the correct tab:
            showTab(currentTab);
        };
        
        function fixStepIndicator(n) {
            $("progress").val(n*25);
        };
        
        // Validate data
        function validateform() {
            return true;
        };
        
        
        // Graphs
        // Define temp data
		var scores = [
			{	'name': 'Walter', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
			{	'name': 'Josh', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
			{	'name': 'Ezra', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
			{	'name': 'Ethan', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
			{	'name': 'Emily', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
			{	'name': 'David', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
			{	'name': 'Colin', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
			{	'name': 'Anastassia', 
				'total': 0, 
				'Week 1': 0, 
				'Week 2': 0, 
				'Week 3': 0,
				'Week 4': 0, 
				'Week 5': 0, 
				'Week 6': 0,
				'Week 7': 0, 
				'Week 8': 0, 
				'Week 9': 0,
				'Week 10': 0, 
				'Week 11': 0, 
				'Week 12': 0,
				'Week 13': 0, 
				'Week 14': 0, 
				'Week 15': 0
			},
		];
		var response = [
			{   'name': 'Ethan', 
                'week': 1, 
                'date': '2/28/18', 
                'reward': 'Devon', 
                'immunity': 'Ben', 
                'eliminated': 'Dr. Mike', 
                'safe': 'Ben'
            },
		];
		var results = [
			{	'week': 1,
				'date': '2/28/18', 
				'reward': null, 
				'immunity': null, 
				'eliminated': null,
				'idolFound': null,
				'idolPlayed': null,
				'titleQuote': null,
				'nudity': null
			},
		];
		
		// Create arrays for players, keys (weeks)
		var players = scores.map(function(d) { return d.name; });
		var keys = Object.keys(scores[0]).splice(2,)
		
		// Define chart elements
		var margin = {top: 20, right: 20, bottom: 30, left: 80},
			width = 900 - margin.left - margin.right,
			height = 480 - margin.top - margin.bottom;
			
		// Define Scales and Axes
		var x = d3.scaleLinear()
			.range([0, width-100]);
		var y = d3.scaleBand()
			.domain(players)
			.rangeRound([height, 0], 0.3);
		var color = d3.scaleOrdinal()
			.domain(keys)
			.range(["#8dd3c7", "#ffffb3", "#bebada", 
					"#fb8072", "#80b1d3", "#fdb462", 
					"#b3de69", "#fccde5", "#d9d9d9", 
					"#bc80bd", "#ccebc5", "#ffed6f",
					"#1f78b4", "#33a02c", "#6a3d9a"]);
		var xAxis = d3.axisBottom(x);
		var yAxis = d3.axisLeft(y);
		
		// Define tooltip
		var tip = d3.tip()
			.attr('class', 'd3-tip')
			.offset([-5, 0])
			.html(function(d) {
				return 	"<strong>" + d.data.name + "</strong>" +
						"<br><span>Weekly Score = " + String(d[1]-d[0]) + "</span>" +
						"<br><span>Total Score = " + d.data.total + "</span>"
			});
		
		// Define SVG and associated elements
		var svg = d3.select("#chart")
			.append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
		var chart = svg.append("g")
			.attr("transform",  "translate(" + margin.left + "," + margin.top + ")")
			.call(tip);	
		
		// Calculate scores
		for (var n=0; n<scores.length; n++) {
			var cur_player = scores[n].name;
			for (var i=0; i<results.length; i++) {
				for (var j=0; j<response.length; j++) {
					if (response[j].name == cur_player && results[i].week == response[j].week) {
						// Define Week
						var cur_week = 'Week ' + String(results[i].week)
						// Reward
						if (results[i].reward == response[j].reward && response[j].reward) {
							scores[n][cur_week] += 5;
							scores[n].total += 5;
						};
						// Immunity
						if (results[i].immunity == response[j].immunity && response[j].immunity) {
							scores[n][cur_week] += 7.5;
							scores[n].total += 7.5;
						};
						// Eliminated
						if (results[i].eliminated == response[j].eliminated && response[j].eliminated) {
							scores[n][cur_week] += 10;
							scores[n].total += 10;
						};
						// Safe
						if (results[i].eliminated !== response[j].safe && response[j].safe) {
							scores[n][cur_week] += 10;
							scores[n].total += 10;
						};
						// Title Quote
						if (results[i].titleQuote !== response[j].titleQuote && response[j].titleQuote) {
							scores[n][cur_week] += 2;
							scores[n].total += 2;
						};
						// Nudity
						if (results[i].nudity !== response[j].nudity && response[j].nudity) {
							scores[n][cur_week] += 2;
							scores[n].total += 2;
						};
						// Idol Found
						if (results[i].idolFound !== response[j].idolFound && response[j].idolFound) {
							scores[n][cur_week] += 2;
							scores[n].total += 2;
						};
						// Idol Played
						if (results[i].idolPlayed !== response[j].idolPlayed && response[j].idolPlayed) {
							scores[n][cur_week] += 2;
							scores[n].total += 2;
						};
					};
				};
			};
		};
		
		// Define X-Scale Domain
		x.domain([0,d3.max(scores, function(d) { return d.total; })]);
		
		// Render Chart
		chart.append("g")
			.selectAll("g")
			.data(d3.stack().keys(keys)(scores))
			.enter().append("g")
				.attr("fill", function (d){ return color(d.key); })
			.selectAll("rect")
			.data(function(d) { return d; })
			.enter().append("rect")
				.attr("class", "bar")
				.attr("x", function(d) { return x(d[0]); })
				.attr("y", function(d) { return y(d.data.name); })
				.attr("width", function(d) { return x(d[1]) - x(d[0]); })
				.attr("height", y.bandwidth())
				.on("mouseenter", function(d) { 
					tip.show(d); 
					d3.select(this).style("cursor", "pointer")
								   .style("fill-opacity", 0.5);
				})
				.on("mouseleave", function(d) { 
					d3.select(this).style("fill-opacity", 1);
					tip.hide(d);
				});
		
		// Add Axes
		chart.append("g")
			.attr("class", "x axis")
			.attr("transform", "translate(0," + height + ")")
			.call(xAxis);
		chart.append("g")
			.attr("class", "y axis")
			.call(yAxis);
		
		// Add Legend
		var legend = chart.append("g")
			.attr("font-family", "sans-serif")
			.attr("font-size", 10)
			.attr("text-anchor", "end")
			.selectAll("g")
				.data(keys)
				.enter().append("g")
				.attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

		legend.append("rect")
			.attr("x", width - 19)
			.attr("width", 19)
			.attr("height", 19)
			.attr("fill", color);

		legend.append("text")
			.attr("x", width - 24)
			.attr("y", 9.5)
			.attr("dy", "0.32em")
			.text(function(d) { return d; });
        
    });
    </script>
    
</html>